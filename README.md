# groq-go

[![Go Reference](https://pkg.go.dev/badge/github.com/conneroisu/groq-go.svg)](https://pkg.go.dev/github.com/conneroisu/groq-go)
[![Go Report Card](https://goreportcard.com/badge/github.com/conneroisu/groq-go)](https://goreportcard.com/report/github.com/conneroisu/groq-go)
[![Coverage Status](https://coveralls.io/repos/github/conneroisu/groq-go/badge.svg?branch=main)](https://coveralls.io/github/conneroisu/groq-go?branch=main)
[![PhormAI](https://img.shields.io/badge/Phorm-Ask_AI-%23F2777A.svg?&logo=data:image/svg+xml)](https://www.phorm.ai/query?projectId=0634251d-5a98-4c37-ac2f-385b588ce3d3)

<a href="https://groq.com" target="_blank" rel="noopener noreferrer" style="width: 10px; height: 30px;">
  <img
    src="https://groq.com/wp-content/uploads/2024/03/PBG-mark1-color.svg"
    alt="Powered by Groq for fast inference."
  />
</a>

## Features

- Supports all models from [Groq](https://wow.groq.com/) in a type-safe way.
- Supports streaming.
- Supports moderation.
- Supports audio transcription.
- Supports audio translation.
- Supports Tool Use.
- Supports Function Calling.
- JSON Schema Generation from structs.
- Supports [Toolhouse](https://app.toolhouse.ai/) function calling. [Extention](https://github.com/conneroisu/groq-go/tree/main/extensions/toolhouse)
- Supports [E2b](https://e2b.dev/) function calling. [Extention](https://github.com/conneroisu/groq-go/tree/main/extensions/e2b)
- Supports [Composio](https://composio.dev/) function calling. [Extention](https://github.com/conneroisu/groq-go/tree/main/extensions/composio)
- Supports [Jigsaw Stack](https://jigsawstack.com/) function calling. [Extention](https://github.com/conneroisu/groq-go/tree/main/extensions/jigsawstack)

## Installation

```bash
go get github.com/conneroisu/groq-go
```

## Examples

For introductory examples, see the [examples](https://github.com/conneroisu/groq-go/tree/main/examples) directory.

- [audio](/examples/audio-lex-fridman)
- [json](/examples/json-chat)
- [moderation](/examples/moderation)
- [Use llava-v1.5-7b-4096-preview to talks about images](/examples/llava-blind)
- [Chat with a terminal using groq-go](/examples/terminal-chat)
- [Document VHDL files using groq-go](/examples/vhdl-documentor-json)
- [Execute generated python code using Toolhouse and groq-go](/examples/toolhouse-python-code-interpreter)
- [Star a Github Repository using Composio and groq-go](/examples/composio-github-star)

External Repositories using groq-go:
- [Automatic Git Commit Message Generator](https://github.com/conneroisu/gita)


## Development

To run the tests:

Make sure you have a groq key set in the environment variable `GROQ_KEY`.
```bash
task test
```

To run the linter:

```bash
task lint
```

If you fork the repository, you should set up the following environment variables in ci/cd:

```bash
export E2B_API_KEY=your-e2b-api-key
export GROQ_KEY=your-groq-key
export TOOLHOUSE_API_KEY=your-toolhouse-api-key
```

## Documentation

The following documentation is generated from the source code using [gomarkdoc](https://github.com/princjef/gomarkdoc).

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# groq

```go
import "github.com/conneroisu/groq-go"
```

Package groq provides a unofficial client for the Groq API.

With specially designed hardware, the Groq API is a super fast way to query open source llms.

API Documentation: https://console.groq.com/docs/quickstart

## Index

- [Constants](<#constants>)
- [func AudioMultipartForm\(request AudioRequest, b builders.FormBuilder\) error](<#AudioMultipartForm>)
- [type AudioRequest](<#AudioRequest>)
- [type AudioResponse](<#AudioResponse>)
  - [func \(r \*AudioResponse\) SetHeader\(header http.Header\)](<#AudioResponse.SetHeader>)
- [type ChatCompletionChoice](<#ChatCompletionChoice>)
- [type ChatCompletionMessage](<#ChatCompletionMessage>)
  - [func \(m ChatCompletionMessage\) MarshalJSON\(\) \(\[\]byte, error\)](<#ChatCompletionMessage.MarshalJSON>)
  - [func \(m \*ChatCompletionMessage\) UnmarshalJSON\(bs \[\]byte\) \(err error\)](<#ChatCompletionMessage.UnmarshalJSON>)
- [type ChatCompletionRequest](<#ChatCompletionRequest>)
- [type ChatCompletionResponse](<#ChatCompletionResponse>)
  - [func \(r \*ChatCompletionResponse\) SetHeader\(h http.Header\)](<#ChatCompletionResponse.SetHeader>)
- [type ChatCompletionResponseFormat](<#ChatCompletionResponseFormat>)
- [type ChatCompletionResponseFormatJSONSchema](<#ChatCompletionResponseFormatJSONSchema>)
- [type ChatCompletionStream](<#ChatCompletionStream>)
- [type ChatCompletionStreamChoice](<#ChatCompletionStreamChoice>)
- [type ChatCompletionStreamChoiceDelta](<#ChatCompletionStreamChoiceDelta>)
- [type ChatCompletionStreamResponse](<#ChatCompletionStreamResponse>)
- [type ChatMessageImageURL](<#ChatMessageImageURL>)
- [type ChatMessagePart](<#ChatMessagePart>)
- [type ChatMessagePartType](<#ChatMessagePartType>)
- [type Client](<#Client>)
  - [func NewClient\(groqAPIKey string, opts ...Opts\) \(\*Client, error\)](<#NewClient>)
  - [func \(c \*Client\) CreateChatCompletion\(ctx context.Context, request ChatCompletionRequest\) \(response ChatCompletionResponse, err error\)](<#Client.CreateChatCompletion>)
  - [func \(c \*Client\) CreateChatCompletionJSON\(ctx context.Context, request ChatCompletionRequest, output any\) \(err error\)](<#Client.CreateChatCompletionJSON>)
  - [func \(c \*Client\) CreateChatCompletionStream\(ctx context.Context, request ChatCompletionRequest\) \(stream \*ChatCompletionStream, err error\)](<#Client.CreateChatCompletionStream>)
  - [func \(c \*Client\) CreateTranscription\(ctx context.Context, request AudioRequest\) \(AudioResponse, error\)](<#Client.CreateTranscription>)
  - [func \(c \*Client\) CreateTranslation\(ctx context.Context, request AudioRequest\) \(AudioResponse, error\)](<#Client.CreateTranslation>)
  - [func \(c \*Client\) Moderate\(ctx context.Context, messages \[\]ChatCompletionMessage, model models.ModerationModel\) \(response Moderation, err error\)](<#Client.Moderate>)
- [type Endpoint](<#Endpoint>)
- [type FinishReason](<#FinishReason>)
  - [func \(r FinishReason\) MarshalJSON\(\) \(\[\]byte, error\)](<#FinishReason.MarshalJSON>)
- [type Format](<#Format>)
- [type ImageURLDetail](<#ImageURLDetail>)
- [type LogProbs](<#LogProbs>)
- [type Moderation](<#Moderation>)
- [type Opts](<#Opts>)
  - [func WithBaseURL\(baseURL string\) Opts](<#WithBaseURL>)
  - [func WithClient\(client \*http.Client\) Opts](<#WithClient>)
  - [func WithLogger\(logger \*slog.Logger\) Opts](<#WithLogger>)
- [type PromptAnnotation](<#PromptAnnotation>)
- [type RateLimitHeaders](<#RateLimitHeaders>)
- [type ResetTime](<#ResetTime>)
  - [func \(r ResetTime\) String\(\) string](<#ResetTime.String>)
  - [func \(r ResetTime\) Time\(\) time.Time](<#ResetTime.Time>)
- [type Role](<#Role>)
- [type Segments](<#Segments>)
- [type StreamOptions](<#StreamOptions>)
- [type TopLogProbs](<#TopLogProbs>)
- [type TranscriptionTimestampGranularity](<#TranscriptionTimestampGranularity>)
- [type Usage](<#Usage>)
- [type Words](<#Words>)


## Constants

<a name="ChatMessageRoleSystem"></a>

```go
const (
    // ChatMessageRoleSystem is the system chat message role.
    ChatMessageRoleSystem Role = "system"
    // ChatMessageRoleUser is the user chat message role.
    ChatMessageRoleUser Role = "user"
    // ChatMessageRoleAssistant is the assistant chat message role.
    ChatMessageRoleAssistant Role = "assistant"
    // ChatMessageRoleFunction is the function chat message role.
    ChatMessageRoleFunction Role = "function"
    // ChatMessageRoleTool is the tool chat message role.
    ChatMessageRoleTool Role = "tool"

    // ImageURLDetailHigh is the high image url detail.
    ImageURLDetailHigh ImageURLDetail = "high"
    // ImageURLDetailLow is the low image url detail.
    ImageURLDetailLow ImageURLDetail = "low"
    // ImageURLDetailAuto is the auto image url detail.
    ImageURLDetailAuto ImageURLDetail = "auto"

    // ChatMessagePartTypeText is the text chat message part type.
    ChatMessagePartTypeText ChatMessagePartType = "text"
    // ChatMessagePartTypeImageURL is the image url chat message part type.
    ChatMessagePartTypeImageURL ChatMessagePartType = "image_url"
)
```

<a name="AudioMultipartForm"></a>
## func [AudioMultipartForm](<https://github.com/conneroisu/groq-go/blob/main/audio.go#L189>)

```go
func AudioMultipartForm(request AudioRequest, b builders.FormBuilder) error
```

AudioMultipartForm creates a form with audio file contents and the name of the model to use for audio processing.

<a name="AudioRequest"></a>
## type [AudioRequest](<https://github.com/conneroisu/groq-go/blob/main/audio.go#L31-L49>)

AudioRequest represents a request structure for audio API.

```go
type AudioRequest struct {
    // Model is the model to use for the transcription.
    Model models.AudioModel
    // FilePath is either an existing file in your filesystem or a
    // filename representing the contents of Reader.
    FilePath string
    // Reader is an optional io.Reader when you do not want to use
    // an existing file.
    Reader io.Reader
    // Prompt is the prompt for the transcription.
    Prompt string
    // Temperature is the temperature for the transcription.
    Temperature float32
    // Language is the language for the transcription. Only for
    // transcription.
    Language string
    // Format is the format for the response.
    Format Format
}
```

<a name="AudioResponse"></a>
## type [AudioResponse](<https://github.com/conneroisu/groq-go/blob/main/audio.go#L51-L66>)

AudioResponse represents a response structure for audio API.

```go
type AudioResponse struct {
    // Task is the task of the response.
    Task string `json:"task"`
    // Language is the language of the response.
    Language string `json:"language"`
    // Duration is the duration of the response.
    Duration float64 `json:"duration"`
    // Segments is the segments of the response.
    Segments Segments `json:"segments"`
    // Words is the words of the response.
    Words Words `json:"words"`
    // Text is the text of the response.
    Text string `json:"text"`

    Header http.Header // Header is the header of the response.
}
```

<a name="AudioResponse.SetHeader"></a>
### func \(\*AudioResponse\) [SetHeader](<https://github.com/conneroisu/groq-go/blob/main/audio.go#L113>)

```go
func (r *AudioResponse) SetHeader(header http.Header)
```

SetHeader sets the header of the response.

<a name="ChatCompletionChoice"></a>
## type [ChatCompletionChoice](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L242-L253>)

ChatCompletionChoice represents the chat completion choice.

```go
type ChatCompletionChoice struct {
    Index int `json:"index"` // Index is the index of the choice.
    // Message is the chat completion message of the choice.
    Message ChatCompletionMessage `json:"message"`
    // FinishReason is the finish reason of the choice.
    FinishReason FinishReason `json:"finish_reason"`
    // LogProbs is the log probs of the choice.
    //
    // This is basically the probability of the model choosing the
    // token.
    LogProbs *LogProbs `json:"logprobs,omitempty"`
}
```

<a name="ChatCompletionMessage"></a>
## type [ChatCompletionMessage](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L105-L126>)

ChatCompletionMessage represents the chat completion message.

```go
type ChatCompletionMessage struct {
    // Name is the name of the chat completion message.
    Name string `json:"name"`
    // Role is the role of the chat completion message.
    Role Role `json:"role"`
    // Content is the content of the chat completion message.
    Content string `json:"content"`
    // MultiContent is the multi content of the chat completion
    // message.
    MultiContent []ChatMessagePart `json:"-"`
    // FunctionCall setting for Role=assistant prompts this may be
    // set to the function call generated by the model.
    FunctionCall *tools.FunctionCall `json:"function_call,omitempty"`
    // ToolCalls setting for Role=assistant prompts this may be set
    // to the tool calls generated by the model, such as function
    // calls.
    ToolCalls []tools.ToolCall `json:"tool_calls,omitempty"`
    // ToolCallID is setting for Role=tool prompts this should be
    // set to the ID given in the assistant's prior request to call
    // a tool.
    ToolCallID string `json:"tool_call_id,omitempty"`
}
```

<a name="ChatCompletionMessage.MarshalJSON"></a>
### func \(ChatCompletionMessage\) [MarshalJSON](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L354>)

```go
func (m ChatCompletionMessage) MarshalJSON() ([]byte, error)
```

MarshalJSON method implements the json.Marshaler interface.

<a name="ChatCompletionMessage.UnmarshalJSON"></a>
### func \(\*ChatCompletionMessage\) [UnmarshalJSON](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L383>)

```go
func (m *ChatCompletionMessage) UnmarshalJSON(bs []byte) (err error)
```

UnmarshalJSON method implements the json.Unmarshaler interface.

<a name="ChatCompletionRequest"></a>
## type [ChatCompletionRequest](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L155-L213>)

ChatCompletionRequest represents a request structure for the chat completion API.

```go
type ChatCompletionRequest struct {
    // Model is the model of the chat completion request.
    Model models.ChatModel `json:"model"`
    // Messages is the messages of the chat completion request.
    //
    // These act as the prompt for the model.
    Messages []ChatCompletionMessage `json:"messages"`
    // MaxTokens is the max tokens of the chat completion request.
    MaxTokens int `json:"max_tokens,omitempty"`
    // Temperature is the temperature of the chat completion
    // request.
    Temperature float32 `json:"temperature,omitempty"`
    // TopP is the top p of the chat completion request.
    TopP float32 `json:"top_p,omitempty"`
    // N is the n of the chat completion request.
    N   int `json:"n,omitempty"`
    // Stream is the stream of the chat completion request.
    Stream bool `json:"stream,omitempty"`
    // Stop is the stop of the chat completion request.
    Stop []string `json:"stop,omitempty"`
    // PresencePenalty is the presence penalty of the chat
    // completion request.
    PresencePenalty float32 `json:"presence_penalty,omitempty"`
    // ResponseFormat is the response format of the chat completion
    // request.
    ResponseFormat *ChatCompletionResponseFormat `json:"response_format,omitempty"`
    // Seed is the seed of the chat completion request.
    Seed *int `json:"seed,omitempty"`
    // FrequencyPenalty is the frequency penalty of the chat
    // completion request.
    FrequencyPenalty float32 `json:"frequency_penalty,omitempty"`
    // LogitBias is must be a token id string (specified by their
    // token ID in the tokenizer), not a word string. incorrect: `"logit_bias":{ "You": 6}`, correct: `"logit_bias":{"1639": 6}` refs: https://platform.openai.com/docs/api-reference/chat/create#chat/create-logit_bias
    LogitBias map[string]int `json:"logit_bias,omitempty"`
    // LogProbs indicates whether to return log probabilities of the
    // output tokens or not. If true, returns the log probabilities
    // of each output token returned in the content of message.
    //
    // This option is currently not available on the
    // gpt-4-vision-preview model.
    LogProbs bool `json:"logprobs,omitempty"`
    // TopLogProbs is an integer between 0 and 5 specifying the
    // number of most likely tokens to return at each token
    // position, each with an associated log probability. Logprobs
    // must be set to true if this parameter is used.
    TopLogProbs int `json:"top_logprobs,omitempty"`
    // User is the user of the chat completion request.
    User string `json:"user,omitempty"`
    // Tools is the tools of the chat completion request.
    Tools []tools.Tool `json:"tools,omitempty"`
    // This can be either a string or an ToolChoice object.
    ToolChoice any `json:"tool_choice,omitempty"`
    // Options for streaming response. Only set this when you set stream: true.
    StreamOptions *StreamOptions `json:"stream_options,omitempty"`
    // Disable the default behavior of parallel tool calls by setting it: false.
    ParallelToolCalls any `json:"parallel_tool_calls,omitempty"`
    // RetryDelay is the delay between retries.
    RetryDelay time.Duration `json:"-"`
}
```

<a name="ChatCompletionResponse"></a>
## type [ChatCompletionResponse](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L256-L273>)

ChatCompletionResponse represents a response structure for chat completion API.

```go
type ChatCompletionResponse struct {
    // ID is the id of the response.
    ID  string `json:"id"`
    // Object is the object of the response.
    Object string `json:"object"`
    // Created is the created time of the response.
    Created int64 `json:"created"`
    // Model is the model of the response.
    Model models.ChatModel `json:"model"`
    // Choices is the choices of the response.
    Choices []ChatCompletionChoice `json:"choices"`
    // Usage is the usage of the response.
    Usage Usage `json:"usage"`
    // SystemFingerprint is the system fingerprint of the response.
    SystemFingerprint string `json:"system_fingerprint"`
    // Header is the header of the response.
    http.Header
}
```

<a name="ChatCompletionResponse.SetHeader"></a>
### func \(\*ChatCompletionResponse\) [SetHeader](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L426>)

```go
func (r *ChatCompletionResponse) SetHeader(h http.Header)
```

SetHeader sets the header of the response.

<a name="ChatCompletionResponseFormat"></a>
## type [ChatCompletionResponseFormat](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L128-L134>)

ChatCompletionResponseFormat is the chat completion response format.

```go
type ChatCompletionResponseFormat struct {
    // Type is the type of the chat completion response format.
    Type Format `json:"type,omitempty"`
    // JSONSchema is the json schema of the chat completion response
    // format.
    JSONSchema *ChatCompletionResponseFormatJSONSchema `json:"json_schema,omitempty"`
}
```

<a name="ChatCompletionResponseFormatJSONSchema"></a>
## type [ChatCompletionResponseFormatJSONSchema](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L137-L152>)

ChatCompletionResponseFormatJSONSchema is the chat completion response format json schema.

```go
type ChatCompletionResponseFormatJSONSchema struct {
    // Name is the name of the chat completion response format json
    // schema.
    //
    // it is used to further identify the schema in the response.
    Name string `json:"name"`
    // Description is the description of the chat completion
    // response format json schema.
    Description string `json:"description,omitempty"`
    // Schema is the schema of the chat completion response format
    // json schema.
    Schema schema.Schema `json:"schema"`
    // Strict determines whether to enforce the schema upon the
    // generated content.
    Strict bool `json:"strict"`
}
```

<a name="ChatCompletionStream"></a>
## type [ChatCompletionStream](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L348-L350>)

ChatCompletionStream is a stream of ChatCompletionStreamResponse.

```go
type ChatCompletionStream struct {
    // contains filtered or unexported fields
}
```

<a name="ChatCompletionStreamChoice"></a>
## type [ChatCompletionStreamChoice](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L288-L295>)

ChatCompletionStreamChoice represents a response structure for chat completion API.

```go
type ChatCompletionStreamChoice struct {
    // Index is the index of the choice.
    Index int `json:"index"`
    // Delta is the delta of the choice.
    Delta ChatCompletionStreamChoiceDelta `json:"delta"`
    // FinishReason is the finish reason of the choice.
    FinishReason FinishReason `json:"finish_reason"`
}
```

<a name="ChatCompletionStreamChoiceDelta"></a>
## type [ChatCompletionStreamChoiceDelta](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L276-L285>)

ChatCompletionStreamChoiceDelta represents a response structure for chat completion API.

```go
type ChatCompletionStreamChoiceDelta struct {
    // Content is the content of the response.
    Content string `json:"content,omitempty"`
    // Role is the role of the creator of the completion.
    Role string `json:"role,omitempty"`
    // FunctionCall is the function call of the response.
    FunctionCall *tools.FunctionCall `json:"function_call,omitempty"`
    // ToolCalls are the tool calls of the response.
    ToolCalls []tools.ToolCall `json:"tool_calls,omitempty"`
}
```

<a name="ChatCompletionStreamResponse"></a>
## type [ChatCompletionStreamResponse](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L313-L346>)

ChatCompletionStreamResponse represents a response structure for chat completion API.

```go
type ChatCompletionStreamResponse struct {
    // ID is the identifier for the chat completion stream response.
    ID  string `json:"id"`
    // Object is the object type of the chat completion stream
    // response.
    Object string `json:"object"`
    // Created is the creation time of the chat completion stream
    // response.
    Created int64 `json:"created"`
    // Model is the model used for the chat completion stream
    // response.
    Model models.ChatModel `json:"model"`
    // Choices is the choices for the chat completion stream
    // response.
    Choices []ChatCompletionStreamChoice `json:"choices"`
    // SystemFingerprint is the system fingerprint for the chat
    // completion stream response.
    SystemFingerprint string `json:"system_fingerprint"`
    // PromptAnnotations is the prompt annotations for the chat
    // completion stream response.
    PromptAnnotations []PromptAnnotation `json:"prompt_annotations,omitempty"`
    // PromptFilterResults is the prompt filter results for the chat
    // completion stream response.
    PromptFilterResults []struct {
        Index int `json:"index"`
    }   `json:"prompt_filter_results,omitempty"`
    // Usage is an optional field that will only be present when you
    // set stream_options: {"include_usage": true} in your request.
    //
    // When present, it contains a null value except for the last
    // chunk which contains the token usage statistics for the
    // entire request.
    Usage *Usage `json:"usage,omitempty"`
}
```

<a name="ChatMessageImageURL"></a>
## type [ChatMessageImageURL](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L88-L93>)

ChatMessageImageURL represents the chat message image url.

```go
type ChatMessageImageURL struct {
    // URL is the url of the image.
    URL string `json:"url,omitempty"`
    // Detail is the detail of the image url.
    Detail ImageURLDetail `json:"detail,omitempty"`
}
```

<a name="ChatMessagePart"></a>
## type [ChatMessagePart](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L96-L103>)

ChatMessagePart represents the chat message part of a chat completion message.

```go
type ChatMessagePart struct {
    // Text is the text of the chat message part.
    Text string `json:"text,omitempty"`
    // Type is the type of the chat message part.
    Type ChatMessagePartType `json:"type,omitempty"`
    // ImageURL is the image url of the chat message part.
    ImageURL *ChatMessageImageURL `json:"image_url,omitempty"`
}
```

<a name="ChatMessagePartType"></a>
## type [ChatMessagePartType](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L78>)

ChatMessagePartType is the chat message part type.

string

```go
type ChatMessagePartType string
```

<a name="Client"></a>
## type [Client](<https://github.com/conneroisu/groq-go/blob/main/client.go#L23-L40>)

Client is a Groq api client.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

<a name="NewClient"></a>
### func [NewClient](<https://github.com/conneroisu/groq-go/blob/main/client.go#L135>)

```go
func NewClient(groqAPIKey string, opts ...Opts) (*Client, error)
```

NewClient creates a new Groq client.

<a name="Client.CreateChatCompletion"></a>
### func \(\*Client\) [CreateChatCompletion](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L470-L473>)

```go
func (c *Client) CreateChatCompletion(ctx context.Context, request ChatCompletionRequest) (response ChatCompletionResponse, err error)
```

CreateChatCompletion method is an API call to create a chat completion.

Example:

```
func run(
        ctx context.Context,
) error {
        key := os.Getenv("GROQ_KEY")
        client, err := groq.NewClient(key)
        if err != nil {
                return err
        }
        response, err := client.CreateChatCompletion(
                ctx,
                groq.ChatCompletionRequest{
                        Model: models.ModelLlavaV157B4096Preview,
                        Messages: []groq.ChatCompletionMessage{
                                {
                                        Role: groq.ChatMessageRoleUser,
                                        MultiContent: []groq.ChatMessagePart{
                                                {
                                                        Type: groq.ChatMessagePartTypeText,
                                                        Text: "What is the contents of the image?",
                                                },
                                                {
                                                        Type: groq.ChatMessagePartTypeImageURL,
                                                        ImageURL: &groq.ChatMessageImageURL{
                                                                URL:    "https://cdnimg.webstaurantstore.com/images/products/large/87539/251494.jpg",
                                                                Detail: "auto",
                                                        },
                                                }},
                                },
                        },
                        MaxTokens: 2000,
                },
        )
        if err != nil {
                return err
        }
        fmt.Println(response.Choices[0].Message.Content)
        return nil
}
```

<a name="Client.CreateChatCompletionJSON"></a>
### func \(\*Client\) [CreateChatCompletionJSON](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L639-L643>)

```go
func (c *Client) CreateChatCompletionJSON(ctx context.Context, request ChatCompletionRequest, output any) (err error)
```

CreateChatCompletionJSON method is an API call to create a chat completion w/ object output.

Example:

```
// Responses is a response from the models endpoint.
type Responses []struct {
        Title string `json:"title" jsonschema:"title=Poem Title,description=Title of the poem, minLength=1, maxLength=20"`
        Text  string `json:"text" jsonschema:"title=Poem Text,description=Text of the poem, minLength=10, maxLength=200"`
}

func run(
        ctx context.Context,
) error {
        client, err := groq.NewClient(os.Getenv("GROQ_KEY"))
        if err != nil {
                return err
        }
        resp := &Responses{}
        err = client.CreateChatCompletionJSON(ctx, groq.ChatCompletionRequest{
                Model: models.ModelLlama3Groq70B8192ToolUsePreview,
                Messages: []groq.ChatCompletionMessage{
                        {
                                Role:    groq.ChatMessageRoleUser,
                                Content: "Create 5 short poems in json format with title and text.",
                        },
                },
                MaxTokens: 2000,
        }, resp)
        if err != nil {
                return err
        }

        jsValue, err := json.MarshalIndent(resp, "", "  ")
        if err != nil {
                return err
        }
        fmt.Println(string(jsValue))

        return nil
}
```

<a name="Client.CreateChatCompletionStream"></a>
### func \(\*Client\) [CreateChatCompletionStream](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L572-L575>)

```go
func (c *Client) CreateChatCompletionStream(ctx context.Context, request ChatCompletionRequest) (stream *ChatCompletionStream, err error)
```

CreateChatCompletionStream method is an API call to create a chat completion w/ streaming support.

If set, tokens will be sent as data\-only server\-sent events as they become available, with the stream terminated by a data: \[DONE\] message.

Example:

```
func run(
        ctx context.Context,
        r io.Reader,
        w io.Writer,
) error {
        key := os.Getenv("GROQ_KEY")
        client, err := groq.NewClient(key)
        if err != nil {
                return err
        }
        for {
                err = input(ctx, client, r, w)
                if err != nil {
                        return err
                }
        }
}
func input(
        ctx context.Context,
        client *groq.Client,
        r io.Reader,
        w io.Writer,
) error {
        fmt.Println("")
        fmt.Print("->")
        reader := bufio.NewReader(r)
        writer := w
        var lines []string
        select {
        case <-ctx.Done():
                return ctx.Err()
        default:
                line, err := reader.ReadString('\n')
                if err != nil {
                        return err
                }
                if len(strings.TrimSpace(line)) == 0 {
                        break
                }
                lines = append(lines, line)
                break
        }
        history = append(history, groq.ChatCompletionMessage{
                Role:    groq.ChatMessageRoleUser,
                Content: strings.Join(lines, "\n"),
        })
        output, err := client.CreateChatCompletionStream(
                ctx,
                groq.ChatCompletionRequest{
                        Model:     models.ModelGemma29BIt,
                        Messages:  history,
                        MaxTokens: 2000,
                },
        )
        if err != nil {
                return err
        }
        fmt.Fprintln(writer, "\nai: ")
        for {
                response, err := output.Recv()
                if err != nil {
                        return err
                }
                if response.Choices[0].FinishReason == groq.ReasonStop {
                        break
                }
                fmt.Fprint(writer, response.Choices[0].Delta.Content)
        }
        return nil
}
```

<a name="Client.CreateTranscription"></a>
### func \(\*Client\) [CreateTranscription](<https://github.com/conneroisu/groq-go/blob/main/audio.go#L126-L129>)

```go
func (c *Client) CreateTranscription(ctx context.Context, request AudioRequest) (AudioResponse, error)
```

CreateTranscription calls the transcriptions endpoint with the given request.

Returns transcribed text in the response\_format specified in the request.

<a name="Client.CreateTranslation"></a>
### func \(\*Client\) [CreateTranslation](<https://github.com/conneroisu/groq-go/blob/main/audio.go#L136-L139>)

```go
func (c *Client) CreateTranslation(ctx context.Context, request AudioRequest) (AudioResponse, error)
```

CreateTranslation calls the translations endpoint with the given request.

Returns the translated text in the response\_format specified in the request.

<a name="Client.Moderate"></a>
### func \(\*Client\) [Moderate](<https://github.com/conneroisu/groq-go/blob/main/moderation.go#L25-L29>)

```go
func (c *Client) Moderate(ctx context.Context, messages []ChatCompletionMessage, model models.ModerationModel) (response Moderation, err error)
```

Moderate performs a moderation api call over a string. Input can be an array or slice but a string will reduce the complexity.

<a name="Endpoint"></a>
## type [Endpoint](<https://github.com/conneroisu/groq-go/blob/main/client.go#L93>)

Endpoint is an endpoint for the groq api.

```go
type Endpoint string
```

<a name="FinishReason"></a>
## type [FinishReason](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L49>)

FinishReason is the finish reason.

string

```go
type FinishReason string
```

<a name="ReasonStop"></a>

```go
const (
    // ReasonStop is the stop finish reason for a chat completion.
    ReasonStop FinishReason = "stop"
    // ReasonLength is the length finish reason for a chat completion.
    ReasonLength FinishReason = "length"
    // ReasonFunctionCall is the function call finish reason for a chat
    // completion.
    ReasonFunctionCall FinishReason = "function_call"
    // ReasonToolCalls is the tool calls finish reason for a chat
    // completion.
    ReasonToolCalls FinishReason = "tool_calls"
    // ReasonContentFilter is the content filter finish reason for a chat
    // completion.
    ReasonContentFilter FinishReason = "content_filter"
    // ReasonNull is the null finish reason for a chat completion.
    ReasonNull FinishReason = "null"
)
```

<a name="FinishReason.MarshalJSON"></a>
### func \(FinishReason\) [MarshalJSON](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L416>)

```go
func (r FinishReason) MarshalJSON() ([]byte, error)
```

MarshalJSON implements the json.Marshaler interface.

<a name="Format"></a>
## type [Format](<https://github.com/conneroisu/groq-go/blob/main/client.go#L63>)

Format is the format of a response. string

```go
type Format string
```

<a name="FormatText"></a>

```go
const (
    // FormatText is the text format. It is the default format of a
    // response.
    FormatText Format = "text"
    // FormatJSON is the JSON format. There is no support for streaming with
    // JSON format selected.
    FormatJSON Format = "json"
    // FormatSRT is the SRT format. This is a text format that is only
    // supported for the transcription API.
    // SRT format selected.
    FormatSRT Format = "srt"
    // FormatVTT is the VTT format. This is a text format that is only
    // supported for the transcription API.
    FormatVTT Format = "vtt"
    // FormatVerboseJSON is the verbose JSON format. This is a JSON format
    // that is only supported for the transcription API.
    FormatVerboseJSON Format = "verbose_json"
    // FormatJSONObject is the json object chat
    // completion response format type.
    FormatJSONObject Format = "json_object"
    // FormatJSONSchema is the json schema chat
    // completion response format type.
    FormatJSONSchema Format = "json_schema"
)
```

<a name="ImageURLDetail"></a>
## type [ImageURLDetail](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L74>)

ImageURLDetail is the detail of the image at the URL.

string

```go
type ImageURLDetail string
```

<a name="LogProbs"></a>
## type [LogProbs](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L215-L231>)

LogProbs is the top\-level structure containing the log probability information.

```go
type LogProbs struct {
    // Content is a list of message content tokens with log
    // probability information.
    Content []struct {
        // Token is the token of the log prob.
        Token string `json:"token"`
        // LogProb is the log prob of the log prob.
        LogProb float64 `json:"logprob"`
        // Omitting the field if it is null
        Bytes []byte `json:"bytes,omitempty"`
        // TopLogProbs is a list of the most likely tokens and
        // their log probability, at this token position. In
        // rare cases, there may be fewer than the number of
        // requested top_logprobs returned.
        TopLogProbs []TopLogProbs `json:"top_logprobs"`
    } `json:"content"`
}
```

<a name="Moderation"></a>
## type [Moderation](<https://github.com/conneroisu/groq-go/blob/main/moderation.go#L15-L20>)

Moderation represents the response of a moderation request.

```go
type Moderation struct {
    // Categories is the categories of the result.
    Categories []moderation.HarmfulCategory `json:"categories"`
    // Flagged is the flagged status of the result.
    Flagged bool `json:"flagged"`
}
```

<a name="Opts"></a>
## type [Opts](<https://github.com/conneroisu/groq-go/blob/main/client.go#L42>)

Opts is a function that sets options for a Groq client.

```go
type Opts func(*Client)
```

<a name="WithBaseURL"></a>
### func [WithBaseURL](<https://github.com/conneroisu/groq-go/blob/main/client.go#L51>)

```go
func WithBaseURL(baseURL string) Opts
```

WithBaseURL sets the base URL for the Groq client.

<a name="WithClient"></a>
### func [WithClient](<https://github.com/conneroisu/groq-go/blob/main/client.go#L46>)

```go
func WithClient(client *http.Client) Opts
```

WithClient sets the client for the Groq client.

<a name="WithLogger"></a>
### func [WithLogger](<https://github.com/conneroisu/groq-go/blob/main/client.go#L56>)

```go
func WithLogger(logger *slog.Logger) Opts
```

WithLogger sets the logger for the Groq client.

<a name="PromptAnnotation"></a>
## type [PromptAnnotation](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L84-L86>)

PromptAnnotation represents the prompt annotation.

```go
type PromptAnnotation struct {
    PromptIndex int `json:"prompt_index,omitempty"`
}
```

<a name="RateLimitHeaders"></a>
## type [RateLimitHeaders](<https://github.com/conneroisu/groq-go/blob/main/client.go#L65-L82>)

RateLimitHeaders struct represents Groq rate limits headers.

```go
type RateLimitHeaders struct {
    // LimitRequests is the limit requests of the rate limit
    // headers.
    LimitRequests int `json:"x-ratelimit-limit-requests"`
    // LimitTokens is the limit tokens of the rate limit headers.
    LimitTokens int `json:"x-ratelimit-limit-tokens"`
    // RemainingRequests is the remaining requests of the rate
    // limit headers.
    RemainingRequests int `json:"x-ratelimit-remaining-requests"`
    // RemainingTokens is the remaining tokens of the rate limit
    // headers.
    RemainingTokens int `json:"x-ratelimit-remaining-tokens"`
    // ResetRequests is the reset requests of the rate limit
    // headers.
    ResetRequests ResetTime `json:"x-ratelimit-reset-requests"`
    // ResetTokens is the reset tokens of the rate limit headers.
    ResetTokens ResetTime `json:"x-ratelimit-reset-tokens"`
}
```

<a name="ResetTime"></a>
## type [ResetTime](<https://github.com/conneroisu/groq-go/blob/main/client.go#L85>)

ResetTime is a time.Time wrapper for the rate limit reset time. string

```go
type ResetTime string
```

<a name="ResetTime.String"></a>
### func \(ResetTime\) [String](<https://github.com/conneroisu/groq-go/blob/main/client.go#L277>)

```go
func (r ResetTime) String() string
```

String returns the string representation of the ResetTime.

<a name="ResetTime.Time"></a>
### func \(ResetTime\) [Time](<https://github.com/conneroisu/groq-go/blob/main/client.go#L282>)

```go
func (r ResetTime) Time() time.Time
```

Time returns the time.Time representation of the ResetTime.

<a name="Role"></a>
## type [Role](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L82>)

Role is the role of the chat completion message.

string

```go
type Role string
```

<a name="Segments"></a>
## type [Segments](<https://github.com/conneroisu/groq-go/blob/main/audio.go#L78-L101>)

Segments is the segments of the response.

```go
type Segments []struct {
    // ID is the ID of the segment.
    ID  int `json:"id"`
    // Seek is the seek of the segment.
    Seek int `json:"seek"`
    // Start is the start of the segment.
    Start float64 `json:"start"`
    // End is the end of the segment.
    End float64 `json:"end"`
    // Text is the text of the segment.
    Text string `json:"text"`
    // Tokens is the tokens of the segment.
    Tokens []int `json:"tokens"`
    // Temperature is the temperature of the segment.
    Temperature float64 `json:"temperature"`
    // AvgLogprob is the avg log prob of the segment.
    AvgLogprob float64 `json:"avg_logprob"`
    // CompressionRatio is the compression ratio of the segment.
    CompressionRatio float64 `json:"compression_ratio"`
    // NoSpeechProb is the no speech prob of the segment.
    NoSpeechProb float64 `json:"no_speech_prob"`
    // Transient is the transient of the segment.
    Transient bool `json:"transient"`
}
```

<a name="StreamOptions"></a>
## type [StreamOptions](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L297-L310>)

StreamOptions represents the stream options.

```go
type StreamOptions struct {
    // IncludeUsage is the include usage option of the stream
    // options.
    //
    // If set, an additional chunk will be streamed before the data:
    // [DONE] message.
    // The usage field on this chunk shows the token usage
    // statistics for the entire request, and the choices field will
    // always be an empty array.
    //
    // All other chunks will also include a usage field, but with a
    // null value.
    IncludeUsage bool `json:"include_usage,omitempty"`
}
```

<a name="TopLogProbs"></a>
## type [TopLogProbs](<https://github.com/conneroisu/groq-go/blob/main/chat.go#L233-L240>)

TopLogProbs represents the top log probs.

```go
type TopLogProbs struct {
    // Token is the token of the top log probs.
    Token string `json:"token"`
    // LogProb is the log prob of the top log probs.
    LogProb float64 `json:"logprob"`
    // Bytes is the bytes of the top log probs.
    Bytes []byte `json:"bytes,omitempty"`
}
```

<a name="TranscriptionTimestampGranularity"></a>
## type [TranscriptionTimestampGranularity](<https://github.com/conneroisu/groq-go/blob/main/audio.go#L29>)

TranscriptionTimestampGranularity is the timestamp granularity for the transcription.

string

```go
type TranscriptionTimestampGranularity string
```

<a name="TranscriptionTimestampGranularityWord"></a>

```go
const (
    // TranscriptionTimestampGranularityWord is the word timestamp
    // granularity.
    TranscriptionTimestampGranularityWord TranscriptionTimestampGranularity = "word"
    // TranscriptionTimestampGranularitySegment is the segment timestamp
    // granularity.
    TranscriptionTimestampGranularitySegment TranscriptionTimestampGranularity = "segment"
)
```

<a name="Usage"></a>
## type [Usage](<https://github.com/conneroisu/groq-go/blob/main/client.go#L87-L91>)

Usage Represents the total token usage per request to Groq.

```go
type Usage struct {
    PromptTokens     int `json:"prompt_tokens"`
    CompletionTokens int `json:"completion_tokens"`
    TotalTokens      int `json:"total_tokens"`
}
```

<a name="Words"></a>
## type [Words](<https://github.com/conneroisu/groq-go/blob/main/audio.go#L68-L76>)

Words is the words of the audio response.

```go
type Words []struct {
    // Word is the textual representation of a word in the audio
    // response.
    Word string `json:"word"`
    // Start is the start of the words in seconds.
    Start float64 `json:"start"`
    // End is the end of the words in seconds.
    End float64 `json:"end"`
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->
